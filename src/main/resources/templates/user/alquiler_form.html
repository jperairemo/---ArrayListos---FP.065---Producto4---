<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<body>

<th:block th:replace="~{layout :: layout(
  ${titulo},
  ${subtitulo},
  ${activePage},
  ~{::content}
)}">


    <section th:fragment="content">


        <div class="split-grid">

            <!-- ================= FORMULARIO IZQUIERDA ================= -->
            <form id="alquilerForm"
                  th:action="@{/user/alquileres/guardar}"
                  th:object="${alquiler}" method="post">

                <!-- VehÃ­culo -->
                <div class="card block">
                    <div class="block-title">
                        <span class="icon-box car">ðŸš—</span>
                        <h3>Seleccionar VehÃ­culo</h3>
                    </div>

                    <label class="label">VehÃ­culo</label>
                    <select th:field="*{vehiculo}" required class="input-select">
                        <option value="" disabled selected>Selecciona un vehÃ­culo</option>
                        <option th:each="v : ${vehiculos}"
                                th:value="${v.id}"
                                th:text="${v.marca + ' ' + v.modelo + ' (' + v.matricula + ')' }">
                        </option>
                    </select>
                </div>

                <!-- Fechas -->
                <div class="card block">
                    <div class="block-title">
                        <span class="icon-box calendar">ðŸ“…</span>
                        <h3>Fechas del Alquiler</h3>
                    </div>

                    <div class="two-cols">
                        <div>
                            <label class="label">Fecha de inicio</label>
                            <input type="date" th:field="*{fechaInicio}" class="input-field" required>
                        </div>

                        <div>
                            <label class="label">Fecha de fin</label>
                            <input type="date" th:field="*{fechaFin}" class="input-field" required>
                        </div>
                    </div>
                </div>

                <!-- Extras -->
                <div class="card block">
                    <div class="block-title">
                        <span class="icon-box extras">ðŸ§©</span>
                        <h3>Extras Disponibles</h3>
                    </div>

                    <div class="extras-grid">
                        <label th:each="ex : ${extras}" class="extra-item">
                            <div class="extra-left">
                                <input type="checkbox" th:value="${ex.id}" th:field="*{extras}">
                                <span th:text="${ex.nombre}"></span>
                            </div>
                            <span class="extra-price" th:text="${ex.precio + 'â‚¬/dÃ­a'}"></span>
                        </label>
                    </div>
                </div>

                <input type="hidden" th:field="*{estado}" value="Pendiente">

            </form>

            <!-- ================== RESUMEN DERECHA =================== -->
            <aside class="card summary">
                <h3>Resumen del Alquiler</h3>

                <div class="summary-row">
                    <span>Total estimado</span>
                    <span class="price-total">â‚¬0</span>
                </div>

                <button type="submit" form="alquilerForm" class="btn-primary summary-btn">
                    Confirmar Alquiler
                </button>

                <a th:href="@{/user/alquileres}" class="cancel-link">
                    Cancelar
                </a>
            </aside>

        </div>

    </section>

</th:block>

</body>
</html>
